<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Inscri√ß√£o - Rio+Elas</title>
    <link rel="stylesheet" href="/static/style.css">
    <link rel="stylesheet" href="/static/assistant.css">
    <link href="https://fonts.googleapis.com/css2?family=Wise:wght@400;500;700;900&display=swap" rel="stylesheet">
    <style>
                .form-group label {
                    font-weight: 400;
                    color: #e91e63;
                    margin-bottom: 8px;
                    font-size: 1.08em;
                    text-align: right;
                    display: block;
                    width: 100%;
                }
        body {
            background: linear-gradient(120deg, #fff 60%, #f8bbd0 100%);
            font-family: 'Wise', 'Segoe UI', Arial, sans-serif;
        }
        .inscricao-container {
            max-width: 480px;
            margin: 48px auto 0 auto;
            background: #fff;
            border-radius: 28px;
            box-shadow: 0 4px 32px rgba(0,0,0,0.10);
            padding: 44px 32px 32px 32px;
            text-align: center;
            position: relative;
        }
        .inscricao-container h2 {
            font-size: 2.2em;
            font-weight: 900;
            color: #e91e63;
            margin-bottom: 28px;
            letter-spacing: -1px;
        }
        .inscricao-container form {
            display: flex;
            flex-direction: column;
            gap: 0;
            align-items: stretch;
            justify-content: center;
            width: 100%;
        }
        /* INPUTS E SELECTS CENTRALIZADOS */
        .inscricao-container input, .inscricao-container select {
            display: block;
            margin-left: auto;
            margin-right: auto;
            width: 100%;
            max-width: 420px;
            min-width: 260px;
            padding: 10px 12px;
            border-radius: 10px;
            border: 1.5px solid #e91e63;
            font-size: 1.08em;
            font-family: 'Wise', 'Segoe UI', Arial, sans-serif;
            background: #fff;
            color: #222;
            transition: border 0.2s;
            outline: none;
            box-sizing: border-box;
        }
        .inscricao-container select {
            appearance: none;
            -webkit-appearance: none;
            -moz-appearance: none;
            background-image: url('data:image/svg+xml;utf8,<svg fill="%23e91e63" height="20" viewBox="0 0 24 24" width="20" xmlns="http://www.w3.org/2000/svg"><path d="M7 10l5 5 5-5z"/></svg>');
            background-repeat: no-repeat;
            background-position: right 14px center;
            background-size: 22px 22px;
        }
        .inscricao-container input:focus, .inscricao-container select:focus {
            border: 1.5px solid #e91e63;
        }
        /* BOT√ïES PARALELEP√çPEDO */
        .btn-voltar, .btn-proximo {
            min-width: 220px;
            min-height: 44px;
            background: linear-gradient(90deg, #e91e63 0%, #ffb6c1 100%);
            color: #fff;
            border: none;
            border-radius: 14px;
            padding: 12px 32px;
            font-size: 1.12em;
            font-weight: 800;
            font-family: 'Wise', 'Segoe UI', Arial, sans-serif;
            cursor: pointer;
            box-shadow: 0 2px 8px rgba(0,0,0,0.10);
            letter-spacing: 0.5px;
            transition: background 0.2s, box-shadow 0.2s, transform 0.1s;
            outline: none;
            text-transform: uppercase;
            display: inline-block;
        }
        .btn-voltar {
            background: #fff;
            color: #e91e63;
            border: 1.5px solid #f8bbd0;
        }
        .btn-proximo {
            background: linear-gradient(90deg, #e91e63 0%, #ffb6c1 100%);
        }
        .btn-proximo:hover, .btn-voltar:hover {
            background: linear-gradient(90deg, #ff69b4 0%, #e91e63 100%);
            color: #fff;
            box-shadow: 0 6px 24px rgba(233,30,99,0.16);
            transform: translateY(-2px) scale(1.04);
        }
        .inscricao-container select {
            appearance: none;
            -webkit-appearance: none;
            -moz-appearance: none;
            background-image: url('data:image/svg+xml;utf8,<svg fill="%23e91e63" height="20" viewBox="0 0 24 24" width="20" xmlns="http://www.w3.org/2000/svg"><path d="M7 10l5 5 5-5z"/></svg>');
            background-repeat: no-repeat;
            background-position: right 14px center;
            background-size: 22px 22px;
        }
        @media (max-width: 600px) {
            .inscricao-container {
                padding: 18px 6px 12px 6px;
            }
            .inscricao-container h2 {
                font-size: 1.3em;
            }
            /* Removido bloco duplicado de .inscricao-container input, .inscricao-container select para evitar conflito de altura */
            .form-btns {
                flex-direction: column;
                gap: 16px;
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <script src="/static/assistant.js"></script>
    <header class="main-header">
        <div class="header-logos">
            <img src="https://i.postimg.cc/8kwjd1CN/logo-rio-elas.png" alt="Logo Rio+Elas" class="logo">
            <img src="/static/logo-prefeitura.png" alt="Prefeitura do Rio" class="logo-prefeitura-topo">
        </div>
    </header>
    <div class="inscricao-container">
        <div class="progress-bar">
            <div class="progress" style="width: 33%;"></div>
        </div>
        <div class="inscricao-numero">üéâ Voc√™ √© a inscri√ß√£o n¬∫ <b>361</b>!</div>
        <h2>Dados Pessoais</h2>
        <p class="inscricao-sub">Preencha seus dados para come√ßarmos sua inscri√ß√£o</p>
        <form id="form-inscricao" method="POST" action="/inscricao" autocomplete="off">
            <div class="form-group">
                <label for="nome">Nome Completo *</label>
                <input type="text" id="nome" name="nome" placeholder="Digite seu nome completo" required maxlength="50">
                {% if erro_nome %}
                <div class="balao-erro" id="nome-balao-erro" style="display:block; position:relative; background:#fff0f3; color:#e91e63; border:1px solid #e91e63; border-radius:8px; padding:7px 12px; font-size:0.98em; box-shadow:0 2px 8px rgba(233,30,99,0.08); margin-top:6px;">{{ erro_nome }}</div>
                {% endif %}
            </div>
            <div class="form-group">
                <label for="genero">G√™nero *</label>
                <select id="genero" name="genero" required>
                    <option value="">Selecione</option>
                    <option value="Feminino">Feminino</option>
                    <option value="Masculino">Masculino</option>
                    <option value="Outro">Outro</option>
                    <option value="Prefiro n√£o dizer">Prefiro n√£o dizer</option>
                </select>
            </div>
            <div class="form-group">
                <label for="cpf">CPF *</label>
                <input type="text" id="cpf" name="cpf" placeholder="000.000.000-00" maxlength="14" pattern="\d{3}\.\d{3}\.\d{3}-\d{2}" required>
                <div class="balao-erro" id="cpf-balao-erro" style="display:none; position:relative; background:#fff0f3; color:#e91e63; border:1px solid #e91e63; border-radius:8px; padding:7px 12px; font-size:0.98em; box-shadow:0 2px 8px rgba(233,30,99,0.08); margin-top:6px;">CPF inv√°lido</div>
            </div>
            <div class="form-group">
                <label for="nascimento">Data de Nascimento *</label>
                <input type="text" id="nascimento" name="nascimento" placeholder="dd/mm/aaaa" required maxlength="10" pattern="\d{2}/\d{2}/\d{4}" oninvalid="this.setCustomValidity('Informe uma data v√°lida no formato dd/mm/aaaa e idade entre 18 e 90 anos')" oninput="this.setCustomValidity('')">
                {% if erro_nascimento %}
                <div class="balao-erro" id="nascimento-balao-erro" style="display:block; position:relative; background:#fff0f3; color:#e91e63; border:1px solid #e91e63; border-radius:8px; padding:7px 12px; font-size:0.98em; box-shadow:0 2px 8px rgba(233,30,99,0.08); margin-top:6px;">{{ erro_nascimento }}</div>
                {% endif %}
            </div>
            <div class="form-group">
                <label for="whatsapp">WhatsApp *</label>
                <input type="tel" id="whatsapp" name="whatsapp" placeholder="(00) 00000-0000" maxlength="15" pattern="\(\d{2}\) \d{5}-\d{4}" required>
                <div class="balao-erro" id="whatsapp-balao-erro" style="display:none; position:relative; background:#fff0f3; color:#e91e63; border:1px solid #e91e63; border-radius:8px; padding:7px 12px; font-size:0.98em; box-shadow:0 2px 8px rgba(233,30,99,0.08); margin-top:6px;"></div>
                    <script>
                    // Valida√ß√£o de CPF
                    function validarCPF(cpf) {
                        cpf = cpf.replace(/\D/g, '');
                        if (cpf.length !== 11 || /^([0-9])\1+$/.test(cpf)) return false;
                        let soma = 0, resto;
                        for (let i = 1; i <= 9; i++) soma += parseInt(cpf.substring(i-1, i)) * (11 - i);
                        resto = (soma * 10) % 11;
                        if ((resto === 10) || (resto === 11)) resto = 0;
                        if (resto !== parseInt(cpf.substring(9, 10))) return false;
                        soma = 0;
                        for (let i = 1; i <= 10; i++) soma += parseInt(cpf.substring(i-1, i)) * (12 - i);
                        resto = (soma * 10) % 11;
                        if ((resto === 10) || (resto === 11)) resto = 0;
                        if (resto !== parseInt(cpf.substring(10, 11))) return false;
                        return true;
                    }
                    // Valida√ß√£o de idade m√≠nima e m√°xima
                    function idadePermitida(data) {
                        // Espera data no formato dd/mm/aaaa
                        if (!/^\d{2}\/\d{2}\/\d{4}$/.test(data)) return 'formato';
                        const partes = data.split('/');
                        const dia = parseInt(partes[0], 10);
                        const mes = parseInt(partes[1], 10);
                        const ano = parseInt(partes[2], 10);
                        if (mes < 1 || mes > 12) return 'mes';
                        if (dia < 1 || dia > 32) return 'dia';
                        const nasc = new Date(ano, mes - 1, dia);
                        if (isNaN(nasc.getTime())) return 'formato';
                        const hoje = new Date();
                        let idade = hoje.getFullYear() - nasc.getFullYear();
                        const m = hoje.getMonth() - nasc.getMonth();
                        if (m < 0 || (m === 0 && hoje.getDate() < nasc.getDate())) idade--;
                        if (idade < 18) return 'minima';
                        if (idade > 90) return 'maxima';
                        return true;
                    }
                    document.getElementById('form-inscricao').onsubmit = function(e) {
                        let email = document.getElementById('email').value.trim();
                        let emailValido = validarEmailPermitido(email);
                        if (!emailValido) {
                            mostrarBalaoErro('email', 'S√≥ s√£o aceitos emails gmail, hotmail, outlook, yahoo ou icloud');
                        } else {
                            removerBalaoErro('email');
                        }
                        if (!emailValido) {
                            e.preventDefault();
                        }
                        // Valida√ß√£o de DDD do WhatsApp
                        let whatsapp = document.getElementById('whatsapp').value;
                        let dddMatch = whatsapp.match(/^\((\d{2})\)/);
                        let ddd = dddMatch ? dddMatch[1] : null;
                        const dddsValidos = [
                            '68','96','92','97','91','93','94','95','63','69', // Norte
                            '82','71','73','74','75','77','85','88','98','99','83','81','87','86','89','84','79', // Nordeste
                            '61','62','64','65','66','67', // Centro-Oeste
                            '27','28','31','32','33','34','35','37','38','21','22','24','11','12','13','14','15','16','17','18','19', // Sudeste
                            '41','42','43','44','45','46','47','48','49','51','53','54','55' // Sul
                        ];
                        if (!ddd || !dddsValidos.includes(ddd)) {
                            mostrarBalaoErro('whatsapp', 'Informe um DDD v√°lido do Brasil.');
                            e.preventDefault();
                        } else {
                            removerBalaoErro('whatsapp');
                        }
                                            // Valida√ß√£o de email permitido
                                            function validarEmailPermitido(email) {
                                                const dominiosPermitidos = [
                                                    'gmail.com',
                                                    'hotmail.com',
                                                    'outlook.com',
                                                    'yahoo.com',
                                                    'icloud.com'
                                                ];
                                                const partes = email.split('@');
                                                if (partes.length !== 2) return false;
                                                const dominio = partes[1].toLowerCase();
                                                return dominiosPermitidos.includes(dominio);
                                            }
                        let cpf = document.getElementById('cpf').value;
                        let nasc = document.getElementById('nascimento').value.trim();
                        let cpfValido = validarCPF(cpf);
                        let idadeStatus = idadePermitida(nasc);
                        if (!cpfValido) {
                            mostrarBalaoErro('cpf', 'CPF inv√°lido');
                        } else {
                            removerBalaoErro('cpf');
                        }
                        if (idadeStatus === 'formato') {
                            mostrarBalaoErro('nascimento', 'Data inv√°lida. Use o formato dd/mm/aaaa');
                        } else if (idadeStatus === 'mes') {
                            mostrarBalaoErro('nascimento', 'M√™s inv√°lido. Digite um m√™s entre 01 e 12');
                        } else if (idadeStatus === 'dia') {
                            mostrarBalaoErro('nascimento', 'Dia inv√°lido. Digite um dia entre 01 e 32');
                        } else if (idadeStatus === 'minima' || idadeStatus === 'maxima') {
                            mostrarBalaoErro('nascimento', 'Idade permitida: de 18 at√© 90 anos');
                        } else {
                            removerBalaoErro('nascimento');
                        }
                        if (!cpfValido || idadeStatus !== true) {
                            e.preventDefault();
                        }
                        // Fun√ß√£o para mostrar bal√£o de erro
                        function mostrarBalaoErro(inputId, mensagem) {
                            let input = document.getElementById(inputId);
                            let balao = document.getElementById(inputId + '-balao-erro');
                            if (!balao) {
                                balao = document.createElement('div');
                                balao.id = inputId + '-balao-erro';
                                balao.className = 'balao-erro';
                                input.parentNode.style.position = 'relative';
                                input.parentNode.appendChild(balao);
                            }
                            balao.textContent = mensagem;
                            balao.style.display = 'block';
                            balao.style.position = 'absolute';
                            balao.style.background = '#fff0f3';
                            balao.style.color = '#e91e63';
                            balao.style.border = '1px solid #e91e63';
                            balao.style.borderRadius = '8px';
                            balao.style.padding = '7px 12px';
                            balao.style.fontSize = '0.98em';
                            balao.style.boxShadow = '0 2px 8px rgba(233,30,99,0.08)';
                            balao.style.zIndex = '10';
                            // Posi√ß√£o correta ao lado do input
                            const inputRect = input.getBoundingClientRect();
                            const parentRect = input.parentNode.getBoundingClientRect();
                            balao.style.left = (input.offsetLeft + input.offsetWidth + 10) + 'px';
                            balao.style.top = (input.offsetTop + (input.offsetHeight/2) - 18) + 'px';
                        }
                        function removerBalaoErro(inputId) {
                            let balao = document.getElementById(inputId + '-balao-erro');
                            if (balao) balao.style.display = 'none';
                        }
                    };
                    // M√°scara para CPF e WhatsApp
                    // CSS para bal√£o de erro
                    const styleBalao = document.createElement('style');
                    styleBalao.innerHTML = `.balao-erro { transition: opacity 0.2s; min-width: 180px; max-width: 260px; word-break: break-word; }`;
                    document.head.appendChild(styleBalao);
                    document.getElementById('cpf').addEventListener('input', function(e) {
                        let v = e.target.value.replace(/\D/g, '').slice(0,11);
                        v = v.replace(/(\d{3})(\d)/, '$1.$2');
                        v = v.replace(/(\d{3})(\d)/, '$1.$2');
                        v = v.replace(/(\d{3})(\d{1,2})$/, '$1-$2');
                        e.target.value = v;
                    });
                    document.getElementById('whatsapp').addEventListener('input', function(e) {
                        let v = e.target.value.replace(/\D/g, '').slice(0,11);
                        // Impede DDD 55
                        if (v.startsWith('55')) {
                            v = v.slice(2);
                        }
                        if (v.length > 2) v = '(' + v.slice(0,2) + ') ' + v.slice(2);
                        if (v.length > 9) v = v.slice(0,10) + '-' + v.slice(10);
                        e.target.value = v;
                    });
                    // Limitar nascimento a 8 caracteres num√©ricos e inserir '/' automaticamente
                    document.getElementById('nascimento').addEventListener('input', function(e) {
                        let v = e.target.value.replace(/\D/g, '').slice(0, 8);
                        if (v.length > 4) {
                            v = v.replace(/(\d{2})(\d{2})(\d{1,4})/, '$1/$2/$3');
                        } else if (v.length > 2) {
                            v = v.replace(/(\d{2})(\d{1,2})/, '$1/$2');
                        }
                        e.target.value = v;
                    });
                    </script>
            </div>
            <div class="form-group">
                <label for="email">E-mail *</label>
                <input type="email" id="email" name="email" placeholder="seuemail@exemplo.com" required>
                <div class="balao-erro" id="email-balao-erro" style="display:none; position:relative; background:#fff0f3; color:#e91e63; border:1px solid #e91e63; border-radius:8px; padding:7px 12px; font-size:0.98em; box-shadow:0 2px 8px rgba(233,30,99,0.08); margin-top:6px;"></div>
            </div>
            <div class="form-btns">
                <button type="button" class="btn-voltar">&lt; VOLTAR</button>
                <button type="submit" class="btn-proximo">PR√ìXIMO <span style="font-size:1.2em;vertical-align:middle;">&#8594;</span></button>
            </div>
        </form>
        <script>
        document.querySelector('.btn-voltar').onclick = function() {
            window.location.href = '/';
        };
        </script>
    </div>
<style>
    .progress-bar {
        width: 100%;
        height: 8px;
        background: #f8bbd0;
        border-radius: 8px;
        margin-bottom: 24px;
        overflow: hidden;
    }
    .progress {
        height: 100%;
        background: linear-gradient(90deg, #e91e63 0%, #ffb6c1 100%);
        border-radius: 8px;
        transition: width 0.3s;
    }
    .inscricao-numero {
        color: #e91e63;
        font-size: 1.1em;
        margin-bottom: 18px;
        font-weight: 500;
    }
    .inscricao-container h2 {
        font-size: 2em;
        font-weight: 900;
        color: #e91e63;
        margin-bottom: 8px;
        letter-spacing: -1px;
    }
    .inscricao-sub {
        color: #e91e63;
        font-size: 1.08em;
        margin-bottom: 24px;
    }
        .form-group {
            display: flex;
            flex-direction: column;
            align-items: stretch;
            margin-bottom: 24px;
            width: 100%;
        }
    .form-group label {
        font-weight: 400;
        color: #e91e63;
        margin-bottom: 6px;
        font-size: 1.08em;
        text-align: left;
        display: block;
        width: 100%;
    }
    /* Removido bloco duplicado de .form-group input para evitar sobrescrever tamanho dos inputs */
    .input-error {
        border: 1.5px solid #e91e63 !important;
        background: #fff0f0 !important;
    }
    .error-msg {
        color: #e91e63;
        font-size: 0.98em;
        margin-top: 4px;
        font-weight: 500;
        display: block;
    }
        .form-btns {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 32px;
            gap: 32px;
            width: 100%;
        }
        /* Removido bloco duplicado de .btn-voltar, .btn-proximo para evitar conflito de tamanho */
        .btn-voltar {
            background: #fff;
            color: #e91e63;
            border: 1.5px solid #f8bbd0;
        }
        .btn-proximo {
            background: linear-gradient(90deg, #e91e63 0%, #ffb6c1 100%);
        }
        .btn-proximo:hover, .btn-voltar:hover {
            background: linear-gradient(90deg, #ff69b4 0%, #e91e63 100%);
            color: #fff;
            box-shadow: 0 6px 24px rgba(233,30,99,0.16);
            transform: translateY(-2px) scale(1.04);
        }
    @media (max-width: 600px) {
            .inscricao-container {
                padding: 18px 6px 12px 6px;
            }
            .inscricao-container h2 {
                font-size: 1.3em;
            }
            .inscricao-container input, .inscricao-container select {
                width: 100%;
                min-width: 0;
                max-width: 98vw;
            }
            .form-btns {
                flex-direction: column;
                gap: 16px;
                width: 100%;
            }
    }
</style>
    </body>
